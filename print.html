<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>&lt;ceb/&gt; ~ Custom Element Builder</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The book presents the usage of the library ceb.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Custom Element Builder</a></li><li class="chapter-item expanded "><a href="Installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/index.html"><strong aria-hidden="true">3.</strong> Builders and decorators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="builders-and-decorators/ElementBuilder.html"><strong aria-hidden="true">3.1.</strong> ElementBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/AttributeBuilder.html"><strong aria-hidden="true">3.2.</strong> AttributeBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/FieldBuilder.html"><strong aria-hidden="true">3.3.</strong> FieldBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/OnBuilder.html"><strong aria-hidden="true">3.4.</strong> OnBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/ContentBuilder.html"><strong aria-hidden="true">3.5.</strong> ContentBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/TemplateBuilder.html"><strong aria-hidden="true">3.6.</strong> TemplateBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/ReferenceBuilder.html"><strong aria-hidden="true">3.7.</strong> ReferenceBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/AttributePropagationBuilder.html"><strong aria-hidden="true">3.8.</strong> AttributePropagationBuilder</a></li><li class="chapter-item expanded "><a href="builders-and-decorators/PropertyDelegationBuilder.html"><strong aria-hidden="true">3.9.</strong> PropertyDelegationBuilder</a></li></ol></li><li class="chapter-item expanded "><a href="templating/index.html"><strong aria-hidden="true">4.</strong> Templating</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="templating/grey_dom.html"><strong aria-hidden="true">4.1.</strong> The Grey DOM</a></li><li class="chapter-item expanded "><a href="templating/template_literal.html"><strong aria-hidden="true">4.2.</strong> Template literal</a></li></ol></li><li class="chapter-item expanded "><a href="examples/index.html"><strong aria-hidden="true">5.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/ex-greeting.html"><strong aria-hidden="true">5.1.</strong> ex-greeting</a></li><li class="chapter-item expanded "><a href="examples/ex-form-field.html"><strong aria-hidden="true">5.2.</strong> ex-form-field</a></li><li class="chapter-item expanded "><a href="examples/ex-todo.html"><strong aria-hidden="true">5.3.</strong> ex-todo</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">&lt;ceb/&gt; ~ Custom Element Builder</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/tmorin/ceb/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#ceb--custom-element-builder" id="ceb--custom-element-builder">&lt;ceb/&gt; ~ Custom Element Builder</a></h1>
<p><code>&lt;ceb/&gt;</code> is a library helping to develop <a href="https://html.spec.whatwg.org/multipage/custom-elements.html">Custom Elements (v1)</a>.
Its core is a builder which executes others builders.
By this way, <code>&lt;ceb/&gt;</code> is natively opened to extensions and builders easily sharable.</p>
<p>A simple Custom Element displaying a greeting text:</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="XWRZwVG" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/XWRZwVG">
  &lt;ceb/&gt; ~ SimpleGreeting</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<hr />
<p><code>&lt;ceb/&gt;</code> is released under the <a href="http://opensource.org/licenses/MIT">MIT license</a>.</p>
<p>The source code is available on GitHub: <a href="https://github.com/tmorin/ceb">github.com/tmorin/ceb</a>.</p>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>From npm or yarn or ... from npm what?</p>
<pre><code class="language-bash">npm install @tmorin/ceb
</code></pre>
<p>And also directly in the browser via <a href="https://unpkg.com">unpkg.com</a></p>
<pre><code class="language-html">&lt;!-- the optimized Universal Module Definition --&gt;
&lt;script src=&quot;https://unpkg.com/@tmorin/ceb/dist/ceb.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<pre><code class="language-html">&lt;!-- the not optimized Universal Module Definition --&gt;
&lt;script src=&quot;https://unpkg.com/@tmorin/ceb/dist/ceb.js&quot;&gt;&lt;/script&gt;
</code></pre>
<h1><a class="header" href="#builders-and-decorators" id="builders-and-decorators">Builders and decorators</a></h1>
<p><code>&lt;ceb/&gt;</code> provides several built-in builders handling the common requirements.</p>
<p>Firstly, the custom element has to be registered using the builder <a href="builders-and-decorators/ElementBuilder.html">ElementBuilder</a>.</p>
<p>Then, other builders can be used to enhance it:</p>
<ul>
<li><a href="builders-and-decorators/AttributeBuilder.html">AttributeBuilder</a>: to define attributes and react on changes</li>
<li><a href="builders-and-decorators/FieldBuilder.html">FieldBuilder</a>: to define fields (property/attribute) and react on changes</li>
<li><a href="builders-and-decorators/OnBuilder.html">OnBuilder</a>: to listen to DOM events</li>
<li><a href="builders-and-decorators/book/builders-and-decorators/ContentBuilder.html">ContentBuilder</a>: to initialize the light or shadow DOM</li>
<li><a href="builders-and-decorators/book/builders-and-decorators/TemplateBuilder.html">TemplateBuilder</a>: to path the DOM of the custom element</li>
<li><a href="builders-and-decorators/ReferenceBuilder.html">ReferenceBuilder</a>: to get reference of children nodes</li>
<li><a href="builders-and-decorators/AttributePropagationBuilder.html">AttributePropagationBuilder</a>: to delegate attribute mutations to child nodes</li>
<li><a href="builders-and-decorators/book/builders-and-decorators/PropertyDelegationBuilder.html">PropertyDelegationBuilder</a>: to delegate the property accesses to a single child node</li>
</ul>
<h1><a class="header" href="#elementbuilder" id="elementbuilder">ElementBuilder</a></h1>
<p>The class <code>ElementBuilder</code> provides services to enhance and register a Custom Element.
It's the main builder, the entry point of the library.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/ElementBuilder.html">ElementBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself" id="challenge-yourself">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>change the tag name to <code>&lt;my-greeting&gt;&lt;/my-greeting&gt;</code> without changing the class name?</li>
<li>transform <code>SimpleGreeting</code> as an extension of <code>h1</code>, so that can be created with <code>&lt;h1 is=&quot;my-greeting&quot;&gt;&lt;/h1&gt;</code>? <small>the class of <code>h1</code> is <code>HTMLHeadingElement</code></small></li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="ExmLwwd" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/ExmLwwd">
  &lt;ceb/&gt; ~ challenge/ElementBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h2><a class="header" href="#define-a-regular-custom-element" id="define-a-regular-custom-element">Define a regular Custom Element</a></h2>
<pre><code class="language-typescript">import {ElementBuilder} from &quot;@tmorin/ceb&quot;
// defines and register the custom element class
@ElementBuilder.get().decorate()
class SimpleGreeting extends HTMLElement {
  constructor(public name = &quot;World&quot;) {
    super();
  }
  connectedCallback() {
    this.textContent = `Hello, ${this.name}!`
  }
}
</code></pre>
<p>Once registered, the Custom Element can be created with three different styles: markup, Object-Oriented and, hybrid.</p>
<p>The first one relies on the tag name of the Custom Element within the markup of an HTML document.</p>
<pre><code class="language-typescript">document.body.innerHTML = `&lt;simple-greeting&gt;&lt;/simple-greeting&gt;`
</code></pre>
<p>The second one relies on the Object-Oriented nature of the Custom Element.
Basically, the class can be instantiated, and the created object can be then append to the DOM.</p>
<pre><code class="language-typescript">const helloJohn: SimpleGreeting = new SimpleGreeting(&quot;John&quot;)
document.body.appendChild(helloJohn)
</code></pre>
<p>The last one lies between the markup and OO style.</p>
<pre><code class="language-typescript">const helloDoe: SimpleGreeting = document.createElement(&quot;simple-greeting&quot;)
helloDoe.name = &quot;Doe&quot;
document.body.appendChild(helloDoe)
</code></pre>
<h2><a class="header" href="#define-an-extension-of-a-native-element" id="define-an-extension-of-a-native-element">Define an extension of a native Element</a></h2>
<pre><code class="language-typescript">import {ElementBuilder} from &quot;@tmorin/ceb&quot;
// defines and register the custom element class
@ElementBuilder.get().extends(&quot;p&quot;).decorate()
class SimpleGreetingParagraph extends HTMLParagraphElement {
  constructor(public name = &quot;World&quot;) {
    super();
  }
  connectedCallback() {
    this.textContent = `Hello, ${this.name}!`
  }
}
</code></pre>
<p>Once registered, the Custom Element can be created like the regular one.
However, because of the extension of a native Element, the creation expects additional information. </p>
<p>The creation with the markup style:</p>
<pre><code class="language-typescript">document.body.innerHTML = `&lt;p is=&quot;simple-greeting-paragraph&quot;&gt;&lt;/p&gt;`
</code></pre>
<p>The creation with the Object-Oriented style:</p>
<pre><code class="language-typescript">const helloJohn: SimpleGreetingParagraph = new SimpleGreeting(&quot;John&quot;)
document.body.appendChild(helloJohn)
</code></pre>
<p>The creation with the hybrid style:</p>
<pre><code class="language-typescript">const helloDoe: SimpleGreetingParagraph = document.createElement(&quot;p&quot;, {
    extends: &quot;is&quot;
})
helloDoe.name = &quot;Doe&quot;
document.body.appendChild(helloDoe)
</code></pre>
<h1><a class="header" href="#attributebuilder" id="attributebuilder">AttributeBuilder</a></h1>
<p>The builder handles the initialization of an attribute as well as the registration of its listeners.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/AttributeBuilder.html">AttributeBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-1" id="challenge-yourself-1">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>display <code>Hello, Joen Doe!</code> just setting the attribute <code>name</code>?</li>
<li>change the attribute name to <code>alt-name</code> without changing the method name?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="rNmvGqq" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/rNmvGqq">
  &lt;ceb/&gt; ~ challenge/AttributeBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#fieldbuilder" id="fieldbuilder">FieldBuilder</a></h1>
<p>The builder binds a property to an attribute.
So that, the value is available and mutable from both sides.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/FieldBuilder.html">FieldBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-2" id="challenge-yourself-2">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>display <code>Hello, Joen Doe!</code> just setting the property <code>name</code>?</li>
<li>change the attribute name to <code>alt-name</code> without changing the property name?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="mdmLqEW" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/mdmLqEW">
  &lt;ceb/&gt; ~ challenge/FieldBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#fieldbuilder-1" id="fieldbuilder-1">FieldBuilder</a></h1>
<p>The builder handles the addition and removal of DOM event listeners.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/OnBuilder.html">OnBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-3" id="challenge-yourself-3">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>display <code>Hello, World!</code> only when the <code>click</code> event comes from a <code>button</code>? <small>c.f. Event Delegation ;)</small></li>
<li>display <code>Hello, World!</code> only on double click? <small>there is a native event for that ;)</small></li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="KKmRyWG" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/KKmRyWG">
  &lt;ceb/&gt; ~ challenge/OnBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#contentbuilder" id="contentbuilder">ContentBuilder</a></h1>
<p>The builder handles the initialization of the HTML content of the Custom Element.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/ContentBuilder.html">ContentBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-4" id="challenge-yourself-4">Challenge yourself</a></h2>
<p>Will you be able ...</p>
<ol>
<li>to display <code>Hello, Joen Doe!</code>?</li>
<li>to render into a Shadow DOM?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="LYymeaB" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/LYymeaB">
  &lt;ceb/&gt; ~ challenge/ContentBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#templatebuilder" id="templatebuilder">TemplateBuilder</a></h1>
<p>The builder handles the integration of a templating solution to update the content of the Custom Element.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/TemplateBuilder.html">TemplateBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-5" id="challenge-yourself-5">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>display <code>Hello, John Doe!</code> calling the <code>render</code> method?</li>
<li>render into a Shadow DOM?</li>
<li>render into a Grey DOM?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="ExmLQYE" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/ExmLQYE">
  &lt;ceb/&gt; ~ challenge/TemplateBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#referencebuilder" id="referencebuilder">ReferenceBuilder</a></h1>
<p>The builder enhances a readonly property to execute a CSS Selector once the property is get.
So that, a property of the Custom Element can always be related to a child element or a set of child elements.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/ReferenceBuilder.html">ReferenceBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-6" id="challenge-yourself-6">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>implement the method <code>sayHelloJohnDoe()</code> to display <code>Hello, Johne Doe!</code>?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="zYwjaMy" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/zYwjaMy">
  &lt;ceb/&gt; ~ challenge/ReferenceBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#attributepropagationbuilder" id="attributepropagationbuilder">AttributePropagationBuilder</a></h1>
<p>The builder handles the propagation of an attribute's values to embedded elements.
That means, each time the attribute is mutated, the mutation is propagated to selected child nodes.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/AttributePropagationBuilder.html">AttributePropagationBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-7" id="challenge-yourself-7">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>propagate the value of the attribute <code>value</code> to the property <code>placeholder</code> of the <code>input</code>?</li>
<li>propagate the value of the attribute <code>frozen</code> to the attribute <code>disabled</code> of the <code>input</code>?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="qBmYKwe" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/qBmYKwe">
  &lt;ceb/&gt; ~ challenge/AttributePropagationBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#propertydelegationbuilder" id="propertydelegationbuilder">PropertyDelegationBuilder</a></h1>
<p>The builder delegates the accesses of a property to an embedded element.</p>
<p>The reference documentation is there: <a href="builders-and-decorators/../api/classes/PropertyDelegationBuilder.html">PropertyDelegationBuilder</a>.</p>
<h2><a class="header" href="#challenge-yourself-8" id="challenge-yourself-8">Challenge yourself</a></h2>
<p>Will you be able to ...</p>
<ol>
<li>delegate the property <code>value</code> to the attribute <code>placeholder</code> of the <code>input</code>?</li>
<li>delegate the property <code>frozen</code> to the property <code>disabled</code> of the <code>input</code>?</li>
</ol>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-slug-hash="QWvrBNr" data-editable="true" data-user="tmorin" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tmorin/pen/QWvrBNr">
  &lt;ceb/&gt; ~ challenge/PropertyDelegationBuilder</a> by Thibault Morin (<a href="https://codepen.io/tmorin">@tmorin</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h1><a class="header" href="#templating" id="templating">Templating</a></h1>
<p><code>&lt;ceb/&gt;</code> provides a built-in solution for templating which can be directly used with the <a href="templating/../builders-and-decorators/TemplateBuilder.html">TemplateBuilder</a>.</p>
<p>The solution relies on a built-in engine which <em>patches</em> the DOM incrementally.
The implementation and the underlying APItemplating is similar to <a href="https://google.github.io/incremental-dom">incremental-dom</a>.
The main difference is the full support of Custom Elements, especially the handling of a <a href="templating/grey_dom.html">Grey DOM</a>.</p>
<p>Its main API is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates">Tagged Templates</a>.
Its usage is cover in the <a href="templating/template_literal.html">Template literal</a> section.</p>
<h1><a class="header" href="#the-light-grey-and-shadow-doms" id="the-light-grey-and-shadow-doms">The Light, Grey and Shadow DOMs</a></h1>
<p>When a Custom Element is responsible for a part of its child nodes, the usage of <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM">Shadow DOM</a> is welcoming.
Shadow DOM handles the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot">HTMLSlotElement</a> elements which can be used as placeholders.
However, Shadow DOM brings a level of isolation which is not always welcome.
Especially for the <em>shadowified</em> markup which relies on common stylesheets.</p>
<p>The built-in template engine provides a solution to handle Grey DOM.
The purpose is to keep the concept of <em>slot</em> coming from Shadow DOM but in the Light DOM.
Therefore, the DOM tree between the Custom Element node, and the <em>slot node</em> becomes a Grey DOM.</p>
<p>Basically, a Grey DOM can only be mutated from its Custom Element and, the Custom Element can only mutate its Grey DOM.
Moreover, like for the Shadow DOM, the Grey DOM handles kind of <code>&lt;slot&gt;</code> elements to manage the placeholders.
However, the Grey DOM is not isolated from the Light DOM context (javascript, styles ...).
For senior JS developers :), it is similar to the <a href="https://code.angularjs.org/1.8.2/docs/guide/directive#creating-a-directive-that-wraps-other-elements">transclude</a> concept implemented in <a href="https://angularjs.org">AngularJS</a>.</p>
<h1><a class="header" href="#template-literal" id="template-literal">Template literal</a></h1>
<p>The built-in template solution provides an API to express templates based on <a href="templating/template_literal.html">Template literal</a>.
The API is the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates">Tagged Templates</a> <code>html</code>.</p>
<p>The reference documentation is there: <a href="templating/../api/index.html#html">html</a>.</p>
<h2><a class="header" href="#common-usages" id="common-usages">Common usages</a></h2>
<h3><a class="header" href="#text" id="text">Text</a></h3>
<p>Write the content <code>Hello, World!</code> in the <code>&lt;p&gt;</code> element:</p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const name = &quot;World&quot;
const template: Template = html`&lt;p&gt;Hello, ${name}!&lt;/p&gt;`
</code></pre>
<h3><a class="header" href="#attribute" id="attribute">Attribute</a></h3>
<p>Set the value <code>foo</code> to the attribute <code>bar</code>:</p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const value = &quot;foo&quot;
const template: Template = html`&lt;input bar=&quot;${value}&quot;&gt;`
</code></pre>
<p>Set boolean values, the <code>checked</code> attribute won't be rendered because its value is <code>false</code>:</p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const checked = false
const template: Template = html`&lt;input required disabled=&quot;&quot; checked=&quot;${checked}&quot;&gt;`
</code></pre>
<h3><a class="header" href="#property" id="property">Property</a></h3>
<p>Set the value <code>foo</code> to the property <code>bar</code>:</p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const value = &quot;Foo&quot;
const template: Template = html`&lt;input p:bar=&quot;${value}&quot;&gt;`
</code></pre>
<h3><a class="header" href="#prevent-extra-processing" id="prevent-extra-processing">Prevent extra processing</a></h3>
<p>The special attribute <code>o:skip</code>, notifies the template engine that the children of the element should not be processed.</p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const template: Template = html`&lt;div&gt;&lt;ul o:skip&gt;&lt;/ul&gt;&lt;/div&gt;`
</code></pre>
<p>When rendering within a Shadow DOM, the usage of the element <code>&lt;slot&gt;</code> have the same effect: the children of the <code>slot</code> element won't be processed.</p>
<h3><a class="header" href="#optimize-patch-activities" id="optimize-patch-activities">Optimize patch activities</a></h3>
<p>The special attribute <code>o:key</code>, notifies the template engine that the current node can be identified by a key.
The key can be of any types.</p>
<p>The feature should be used when rendering a dynamic list where the items can be added/removed/shift.
For each item, the <code>o:key</code> should be provided.
So that, the engine will be able to efficiently discover the related DOM nodes. </p>
<pre><code class="language-typescript">import {html, Template} from &quot;@tmorin/ceb&quot;
const lis = [&quot;item A&quot;, &quot;item B&quot;].map(item =&gt; hmtl`&lt;li o:key=&quot;${item}&quot;&gt;${item}&lt;/li&gt;`)
const template: Template = html`&lt;div&gt;&lt;ul&gt;${lis}&lt;/ul&gt;&lt;/div&gt;`
</code></pre>
<p>When rendering within a Shadow DOM, the usage of the element <code>&lt;slot&gt;</code> have the same effect: the children of the <code>slot</code> element won't be processed.</p>
<h2><a class="header" href="#grey-dom" id="grey-dom">Grey DOM</a></h2>
<p>The special element <code>&lt;ceb-sot&gt;&lt;/ceb-slot&gt;</code> is the marker of the placeholder.</p>
<p>Given the following Custom Element with template expressed using the literal approach:</p>
<pre><code class="language-typescript">import {ElementBuilder, TemplateBuilder, html, Template} from &quot;ceb&quot;
class HelloWorld extends HTMLElement {
  render(): Template {
    return html`&lt;p&gt;Hello, &lt;ceb-slot&gt;&lt;/ceb-slot&gt;!&lt;/p&gt;`
  }
}

ElementBuilder.get().builder(TemplateBuilder.get().parameters({
  greyDom: true // activate the Grey DOM feature
})).register()
</code></pre>
<p>When the following statement is created and rendered:</p>
<pre><code class="language-html">&lt;hello-worlder&gt;John Do&lt;/hello-worlder&gt;
</code></pre>
<p>Then the Light DOM becomes:</p>
<pre><code class="language-html">&lt;hello-worlder&gt;
  Hello, &lt;ceb-slot&gt;John Doe&lt;ceb-slot&gt;!
&lt;/hello-worlder&gt;
</code></pre>
<h1><a class="header" href="#examples" id="examples">Examples</a></h1>
<p>The Git Repository provides examples to demonstrate the usage of <code>&lt;ceb/&gt;</code> features:</p>
<ul>
<li><a href="examples/ex-greeting.html">ex-greeting</a> : a simple Custom Element to display a greeting message</li>
<li><a href="examples/ex-form-field.html">ex-form-field</a> : a simple Custom Element to wrap form controls</li>
<li><a href="examples/ex-todo.html">ex-todo</a> : a simple application to manage a list of todo items.</li>
</ul>
<h1><a class="header" href="#ex-greeting" id="ex-greeting">ex-greeting</a></h1>
<p><em>The source code of the implementation and, the test of this example are available in the Git repository
of <code>&lt;ceb/&gt;</code> : <code>examples/ex-greeting</code>.</em></p>
<p>This example demonstrates how to leverage on some builders and decorators to create a Custom Element which displays a greeting message.</p>
<h2><a class="header" href="#initiate-the-custom-element-class" id="initiate-the-custom-element-class">Initiate the Custom Element class</a></h2>
<p>The Custom Element <code>ex-greeting</code> is a regular ES6 class which extends HTMLElement :</p>
<pre><code class="language-typescript">export class ExGreeting extends HTMLElement {
}
</code></pre>
<h2><a class="header" href="#register-the-custom-element" id="register-the-custom-element">Register the Custom Element</a></h2>
<p>To register <code>ex-greeting</code>, the decorator <code>@ElementBuilder.element</code> is used:</p>
<pre><code class="language-typescript">import {
  ElementBuilder
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
export class ExGreeting extends HTMLElement {
}
</code></pre>
<h2><a class="header" href="#initialize-the-shadow-dom" id="initialize-the-shadow-dom">Initialize the Shadow DOM</a></h2>
<p>To Shadow DOM of <code>ex-greeting</code> is initialized with the decorator <code>@ContentBuilder.content</code> is used :</p>
<pre><code class="language-typescript">import {
  ElementBuilder,
  ContentBuilder
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
@ContentBuilder.get(`&lt;p&gt;Hello, &lt;span id=&quot;name&quot;&gt;&lt;/span&gt;!&lt;/p&gt;`)
  .shadow()
  .decorate()
export class ExGreeting extends HTMLElement {
}
</code></pre>
<h2><a class="header" href="#capture-the-name" id="capture-the-name">Capture the name</a></h2>
<p>The target of the greeting is capture with the field <code>name</code> using the decorator <code>FieldBuilder.field</code> :</p>
<pre><code class="language-typescript">import {
  ElementBuilder,
  ContentBuilder,
  FieldBuilder
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
@ContentBuilder.get(`&lt;p&gt;Hello, &lt;span id=&quot;name&quot;&gt;&lt;/span&gt;!&lt;/p&gt;`)
  .shadow()
  .decorate()
export class ExGreeting extends HTMLElement {
  @FieldBuilder.get().decorate()
  name: string = &quot;World&quot;
}
</code></pre>
<h2><a class="header" href="#update-the-shadow-dom-with-the-captured-name" id="update-the-shadow-dom-with-the-captured-name">Update the Shadow DOM with the captured name</a></h2>
<p>Each time the field <code>name</code> mutates, the element selected by <code>span#name</code> has to be updated with the new value.
There are two ways to handle it with the built-in <code>&lt;ceb/&gt;</code> builders : the craft style and the delegated one.</p>
<h3><a class="header" href="#the--craft-style" id="the--craft-style">The  craft style</a></h3>
<p>The decorator <code>ReferenceBuilder.reference</code> retrieves the reference of the element <code>span#name</code>.</p>
<pre><code class="language-typescript">import {
  ElementBuilder,
  ContentBuilder,
  FieldBuilder,
  ReferenceBuilder
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
@ContentBuilder.get(`&lt;p&gt;Hello, &lt;span id=&quot;name&quot;&gt;&lt;/span&gt;!&lt;/p&gt;`)
  .shadow()
  .decorate()
export class ExGreeting extends HTMLElement {
  @FieldBuilder.get().decorate()
  name: string = &quot;World&quot;
  
  @ReferenceBuilder.get()
    .shadow()
    .selector(&quot;span#name&quot;)
    .decorate()
  span: HTMLSpanElement
}
</code></pre>
<p>Finally, the decorator <code>FieldBuilder.listen</code> handles the mutation of the field <code>name</code> to</p>
<pre><code class="language-typescript">import {
  ElementBuilder,
  ContentBuilder,
  FieldBuilder,
  ReferenceBuilder,
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
@ContentBuilder.get(`&lt;p&gt;Hello, &lt;span id=&quot;name&quot;&gt;&lt;/span&gt;!&lt;/p&gt;`)
  .shadow()
  .decorate()
export class ExGreeting extends HTMLElement {
  @FieldBuilder.get().decorate()
  name: string = &quot;World&quot;

  @ReferenceBuilder.get()
    .shadow()
    .selector(&quot;span#name&quot;)
    .decorate()
  span: HTMLSpanElement

  @FieldBuilder.get().decorate()
  private onName(data: FieldListenerData) {
    this.span.textContent = data.newVal
  }
}
</code></pre>
<h3><a class="header" href="#the-delegated-fashion" id="the-delegated-fashion">The delegated fashion</a></h3>
<p>Alternatively, the decorator <code>AttributePropagationBuilder.delegate</code> can be used to automatically binds the mutation of the field <code>name</code> to the property <code>textContent</code> of the selected element <code>span#name</code> :</p>
<pre><code class="language-typescript">import {
  ElementBuilder,
  ContentBuilder,
  FieldBuilder,
  AttributePropagationBuilder
} from &quot;ceb&quot;;

@ElementBuilder.get().decorate()
@ContentBuilder.get(`&lt;p&gt;Hello, &lt;span id=&quot;name&quot;&gt;&lt;/span&gt;!&lt;/p&gt;`)
  .shadow()
  .decorate()
@AttributePropagationBuilder.get(&quot;name&quot;)
  .shadow()
  .to(&quot;span#name&quot;)
  .property(&quot;textContent&quot;)
export class ExGreeting extends HTMLElement {
  @FieldBuilder.get().decorate()
  name: string = &quot;World&quot;
}
</code></pre>
<h1><a class="header" href="#ex-form-field" id="ex-form-field">ex-form-field</a></h1>
<p><em>The source code of the implementation and, the test of this example are available in the Git repository of <code>&lt;ceb/&gt;</code> : <code>examples/ex-form-field</code>.</em></p>
<p>This example demonstrates how to leverage on some builders and decorators to create a custom element able to wrap form elements with a label and, a helper text.
Both fields can be accessed and mutated with the respective attributes and properties.
Additionally, when the user clicks on the label element, the focus is dynamically propagated to the first focusable wrapper elements.</p>
<p>For instance the following snippet wrap an input text with the label <code>Firstname</code> and the helper text <code>The firstname of your name.</code> :</p>
<pre><code class="language-html">&lt;ex-form-field label=&quot;Firstname&quot; helper=&quot;The firstname of your name.&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;firstname&quot; value=&quot;foo&quot; required=&quot;&quot; /&gt;
&lt;/ex-form-field&gt;
</code></pre>
<p>With Mozilla Firefox, the initial Flatten DOM related to the Custom Element looks like :</p>
<p><img src="examples/ex-form-field_initial_flatten_dom.png" alt="The initial Flatten DOM" /></p>
<p>The Custom Element <code>ex-form-field</code> involves the following native <code>&lt;ceb/&gt;</code> builders :</p>
<table><thead><tr><th>Builders</th><th>Comment</th></tr></thead><tbody>
<tr><td><code>ElementBuilder</code></td><td>The builder registers the Custom Element.</td></tr>
<tr><td><code>ContentBuilder</code></td><td>The builder is used as a decorator and define the content of the Custom Element's Shadow DOM at its creation.</td></tr>
<tr><td><code>FieldBuilder</code></td><td>The builder is used as a decorator to define the two Custom Element's API items: the label and the helper text.</td></tr>
<tr><td><code>AttributePropagationBuilder</code></td><td>The builder is used as a decorator to delegate the mutations of the API items (i.e. the label and the helper text) to the respective DOM elements.</td></tr>
<tr><td><code>OnBuilder</code> and <code>ReferenceBuilder</code></td><td>Both builders are used to react on click event on the label element in order to delegate the focus to the first focusable wrapped form control.</td></tr>
</tbody></table>
<h1><a class="header" href="#ex-todo" id="ex-todo">ex-todo</a></h1>
<p><em>The source code of the implementation and, the test of this example are available in the Git repository of <code>&lt;ceb/&gt;</code> : <code>examples/ex-todo</code>.</em></p>
<p>This example demonstrates how to implement an application managing a simple list of todo item with Custom Element and the native <code>&lt;ceb/&gt;</code> builders</p>
<table><thead><tr><th>Custom Element</th><th>Comment</th></tr></thead><tbody>
<tr><td><code>ex-todo-app</code></td><td>Displays the application and handles the commands <code>ex-todo-add-item</code> and <code>ex-todo-clean-items</code></td></tr>
<tr><td><code>ex-todo-add-item-form</code></td><td>Displays a form to submit items. On submissions the Custom Event <code>ex-todo-add-item</code> is dispatched.</td></tr>
<tr><td><code>ex-todo-clean-items</code></td><td>Displays a form to trigger the cleaning of completed items. On submissions the Custom Event <code>ex-todo-clean-items</code> is dispatched.</td></tr>
<tr><td><code>ex-todo-item-list</code></td><td>Displays a list of <code>ex-todo-item</code></td></tr>
<tr><td><code>ex-todo-item</code></td><td>Displays a form to mutate the content and status of an item.</td></tr>
</tbody></table>
<p>For instance the following snippet instantiates the application :</p>
<pre><code class="language-html">&lt;ex-todo-app&gt;&lt;/ex-todo-app&gt;
</code></pre>
<p>Right after its instanciation, the initial Flatten DOM looks like :</p>
<p><img src="examples/ex-todo_initial_flatten_dom.png" alt="the initial Flatten DOM" /></p>
<p>After the creation of two items where one is flagged as &quot;completed&quot;, then the application looks like :</p>
<p><img src="examples/ex-todo_usage_display.png" alt="the application" /></p>
<p>And the respective Flatten DOM looks like :</p>
<p><img src="examples/ex-todo_usage_flatten_dom.png" alt="the Flatten DOM" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
