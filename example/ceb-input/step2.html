<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Import the polyfill to provide the CustomElement implementation if required-->
  <script src="//cdnjs.cloudflare.com/ajax/libs/document-register-element/1.3.0/document-register-element.js"></script>
  <!-- Import the ceb library -->
  <script src="dist/umd/ceb.min.js"></script>
</head>
<body>

<!-- Define an attribute 'ceb-upper' and handle the first behavior of the inputs value. -->
<script>
  (function () {
    var builder = ceb.element();

    builder.base(
      Object.create(HTMLInputElement.prototype),
      'input'
    );

    // Utility function to change the case of the given value.
    function toCase(v, c) {
      if (c === 'lower') {
        return v && v.toLowerCase();
      } else if (c === 'upper') {
        return v && v.toUpperCase();
      }
      return v;
    }

    // The builder 'attribute()' is used to define an attribute and its underlying property.
    // There, the value can be managed by instance.getAttribute('ceb-case') or instance.setAttribute('ceb-case', '').
    // But it can also be managed as a regular property instance.cebCase or instance.cebCase = ''.
    builder.builders(
      ceb.attribute('ceb-case').listen(function (el, oldVal, newVal) {
        // When the value of 'ceb-case' changes, the value of the input has to be converted accordingly.
        el.value = toCase(el.value, newVal);
      })
    );

    builder.register('ceb-input');
  })();
</script>

<!--
  For the examples below, the attribute 'ceb-case' has been set to 'upper' but the value is in lower case.
  However, on runtime the value is well converted in upper case.
  Indeed the attribute listener is called when the custom element is created (c.f. createdCallback).
 -->

<!-- On runtime the value of the input should in upper case. -->
<input is="ceb-input" ceb-case="upper" value="should be upper">

<!-- As from above, the 'ceb-input' is created with a lower case value but configure to handle upper case value. -->
<script>
  var cebInput = document.createElement('input', 'ceb-input');
  // Set a value in lower case.
  cebInput.value = 'should be upper';
  // Configure the element to handle only upper case value.
  cebInput.cebCase = 'upper';
  document.body.appendChild(cebInput);
</script>

</body>
</html>
